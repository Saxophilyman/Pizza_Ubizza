# Pizza_Ubizza

Задание:
Смоделировать работу пиццерии с очередью заказов, несколькими поварами и автопополнением запасов ингредиентов.



Описание работы пиццерии

В пиццерию в случайные моменты времени поступают заказы на пиццу. Принятый заказ встаёт в очередь заказов на выполнение. 

В пиццерии работают 3 повара, они берут заказы из очереди и исполняют их. Время приготовления для всех заказов одно и то же. После выполнения заказа повар сразу берёт следующий заказ из очереди.

Для выполнения заказа повар расходует продукты со склада. Как только повар берёт заказ в работу, со склада списывается необходимое количество нужных ингредиентов. 

Повар идёт от головы очереди заказов к хвосту и берёт первый заказ, для которого выполняется хотя бы одно из условий: 1) для него хватает ингредиентов, 2) заказ пролежал в очереди дольше N секунд (задаётся константой). 
Если ни одного заказа нет, то повар ждёт M секунд (константа) и проводит повторную проверку очереди.

Время от времени запасы ингредиентов на складе пополняются. Проверка склада выполняется через равные промежутки времени (промежутки времени больше, чем среднее время приготовления двух заказов). 
Для каждого ингредиента задан нижний порог его количества на складе (этот порог может быть одинаковым для всех ингредиентов). Если при проверке выясняется, что количество некоторого ингредиента ниже порогового значения, то запасы ингредиента на складе пополняются. 
Объём пополнения запасов равен нижнему порогу количества данного ингредиента. Например, пусть нижний порог равен 10 единицам, а на складе осталось 7 единиц, тогда при следующем пополнении количество ингредиента увеличится до 17 единиц.



Основной функционал


1. Программа после запуска не должна требовать пользовательского ввода. Все входные данные программа получает в виде констант в коде, параметров командной строки, файлов, либо из БД.

2. Программа должна корректно завершаться после обработки N заказов (N получать в виде параметра командной строки, 10 <= N <= 1000).

3. Генератор заказов, повара, автопополнение реализуются как отдельные потоки (итого минимум 5 потоков). 
Возможно применение пула потоков. Потоки должны корректно взаимодействовать между собой, правильно работать с общими контейнерами. 
При этом архитектура должна быть спроектирована так, чтобы не было лишних прав. Например, генератор заказов должен иметь доступ только на добавление заказа в очередь (доступа на просмотр/изменение/удаление быть не должно).

4. Выбор параметров пиццы (размер, набор и количество ингредиентов) производить случайным образом.

5. Длительность приготовления заказа  задать через константу.

6. При совершении заказа выводить:

Информацию о заказе в одну строку (порядковый номер, состав);

Состояние очереди заказов (вывести в одну строку номера заказов через запятую).

7. Когда повар берёт заказ на исполнение, выводить:

Информацию о поваре (его имя/номер);

Информацию о заказе в одну строку (порядковый номер, состав);

Предупреждение, что заказ будет неполным (если не хватает ингредиентов), при этом выводить, сколько фактически ингредиентов уйдёт на заказ;

Состояние запасов ингредиентов (за вычетом тех, которые потрачены на этот заказ).


8. Когда заказ готов, выводить:

Информацию о заказе (порядковый номер, состав);

Предупреждение, что заказ неполный (если на момент взятия заказа в работу не хватало ингредиентов).



9. Весь вывод должен начинаться с даты-времени вывода в формате:

[25/07/2016 12:35:50] текст сообщения



10. Вывод программы должен быть человекочитаемым: без ошибок, на русском либо английском языке (но не на двух языках сразу), без лишних служебных сообщений.



11. Программа выводит сообщения в консоль и в лог-файл. В начале лог-файла выводить параметры, переданные через командную строку. В остальном вывод в консоль и в лог-файл совпадают. 
Лог-файл для каждого запуска программы должен создаваться заново. Имя лог-файла должно включать дату-время запуска программы.

12. В конце работы программа должна вывести в консоль и в лог-файл статистику: среднее время ожидания заказа; самый долгий заказ; процент неполных заказов.
